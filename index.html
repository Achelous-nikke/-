<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NikkeåŒå¸§å‘½ä¸­æŸ¥è¯¢å·¥å…·</title>
    <meta name="description" content="æŸ¥è¯¢Nikkeæ¸¸æˆä¸­è´æ–¯è’‚ä¸EMT/LPLSçš„åŒå¸§å‘½ä¸­ç»„åˆ">
    <style>
        :root {
            --primary-color: #3498db;
            --success-color: #2ecc71;
            --error-color: #e74c3c;
            --warning-color: #f39c12;
            --light-bg: #f8f9fa;
            --dark-text: #2c3e50;
            --light-text: #7f8c8d;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', Arial, sans-serif;
            line-height: 1.6;
            color: var(--dark-text);
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        h1 {
            margin-bottom: 10px;
            color: var(--dark-text);
            font-size: 2.2rem;
        }

        .description {
            color: var(--light-text);
            font-size: 1.1rem;
        }

        .input-section {
            background: var(--light-bg);
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--dark-text);
        }

        select, input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        select:focus, input:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        small {
            color: var(--light-text);
            font-size: 13px;
            display: block;
            margin-top: 5px;
        }

        #check-btn {
            width: 100%;
            padding: 15px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
        }

        #check-btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }

        #check-btn:active {
            transform: translateY(0);
        }

        .result-section {
            margin-bottom: 30px;
        }

        .result-section h2 {
            margin-bottom: 15px;
            color: var(--dark-text);
        }

        #result-content {
            padding: 20px;
            border-radius: 10px;
            min-height: 100px;
            transition: all 0.3s;
        }

        .success {
            background-color: rgba(46, 204, 113, 0.1);
            border: 2px solid var(--success-color);
            color: #155724;
        }

        .error {
            background-color: rgba(231, 76, 60, 0.1);
            border: 2px solid var(--error-color);
            color: #721c24;
        }

        .info {
            background-color: rgba(52, 152, 219, 0.1);
            border: 2px solid var(--primary-color);
            color: #0c5460;
        }

        .help-section {
            padding: 20px;
            background-color: var(--light-bg);
            border-radius: 10px;
        }

        .help-section h3 {
            margin-bottom: 15px;
            color: var(--dark-text);
        }

        .help-section ul {
            padding-left: 20px;
        }

        .help-section li {
            margin-bottom: 8px;
        }
        
        .possible-combinations {
            margin-top: 20px;
        }
        
        .combination-item {
            padding: 15px;
            margin-bottom: 15px;
            background-color: white;
            border-radius: 8px;
            border-left: 5px solid var(--primary-color);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: var(--light-text);
            font-size: 14px;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .input-section {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>NikkeåŒå¸§å‘½ä¸­æŸ¥è¯¢å·¥å…·</h1>
            <p class="description">æŸ¥è¯¢è´æ–¯è’‚ä¸EMT/LPLSçš„åŒå¸§å‘½ä¸­ç»„åˆï¼Œè½»æ¾æå‡ä¼¤å®³</p>
        </header>
        
        <div class="input-section">
            <div class="input-group">
                <label for="char-type">é€‰æ‹©è§’è‰²ç»„åˆ:</label>
                <select id="char-type">
                    <option value="best_emt">è´æ–¯è’‚ + EMT</option>
                    <option value="best_lpls">è´æ–¯è’‚ + LPLS</option>
                </select>
            </div>
            
            <div class="input-group">
                <label for="best-frames">è´æ–¯è’‚å‡å°‘å¸§æ•°:</label>
                <input type="number" id="best-frames" min="0" max="30" value="0">
                <small>0-30ä¹‹é—´çš„æ•´æ•° (0è¡¨ç¤º-0å¸§ï¼Œ2è¡¨ç¤º-2å¸§ï¼Œä»¥æ­¤ç±»æ¨)</small>
            </div>
            
            <div class="input-group">
                <label for="other-percent">å‰¯è§’è‰²è“„é€Ÿ:</label>
                <select id="other-percent">
                    <!-- é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
                </select>
            </div>
            
            <button id="check-btn">æŸ¥è¯¢åŒå¸§å‘½ä¸­</button>
        </div>
        
        <div class="result-section">
            <h2>æŸ¥è¯¢ç»“æœ</h2>
            <div id="result-content">
                <p>è¯·å¡«å†™ä¸Šæ–¹ä¿¡æ¯å¹¶ç‚¹å‡»æŸ¥è¯¢</p>
            </div>
        </div>
        
        <div class="help-section">
            <h3>ä½¿ç”¨è¯´æ˜</h3>
            <ul>
                <li><strong>è´æ–¯è’‚å‡å°‘å¸§æ•°</strong>ï¼š0è¡¨ç¤º-0å¸§ï¼Œ2è¡¨ç¤º-2å¸§ï¼Œä»¥æ­¤ç±»æ¨</li>
                <li><strong>å‰¯è§’è‰²è“„é€Ÿ</strong>ï¼šæ ¹æ®è§’è‰²é€‰æ‹©å¯¹åº”çš„ç™¾åˆ†æ¯”èŒƒå›´</li>
                <li><strong>åŒå¸§å‘½ä¸­</strong>ï¼šå½“è´æ–¯è’‚ä¸EMT/LPLSåŒæ—¶å‘½ä¸­æ—¶ï¼ŒEMT/LPLSçš„ä¼¤å®³ä¼šå¤§å¹…æå‡</li>
                <li>ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æŸ¥æ‰€æœ‰å¯èƒ½çš„å‡»å‘é…å¯¹å’Œç«™ä½ç»„åˆ</li>
                <li>å¦‚æœå­˜åœ¨å¯è¡Œçš„ç»„åˆï¼Œä¼šæ˜¾ç¤ºæ‰€æœ‰å¯èƒ½çš„å‡»å‘é…å¯¹å’Œç«™ä½è¦æ±‚</li>
            </ul>
        </div>
        
        <footer>
            <p>NikkeåŒå¸§å‘½ä¸­æŸ¥è¯¢å·¥å…· &copy; 2023 | æ•°æ®åŸºäºæ¸¸æˆå®æµ‹</p>
        </footer>
    </div>
    
    <script>
        // åŒå¸§å‘½ä¸­æ•°æ®
        const hitData = {
            "best_emt": {
                "è´æ–¯è’‚ç¬¬ä¸€å‘ vs EMTç¬¬äºŒå‘": [
                    {"best_frames": 0, "emt_percent": "5-7%", "d_value": -2},
                    {"best_frames": 2, "emt_percent": "5-7%", "d_value": 0},
                    {"best_frames": 2, "emt_percent": "8-10%", "d_value": -4},
                    {"best_frames": 4, "emt_percent": "5-7%", "d_value": 2},
                    {"best_frames": 4, "emt_percent": "8-10%", "d_value": -2},
                    {"best_frames": 6, "emt_percent": "8-10%", "d_value": 0},
                    {"best_frames": 4, "emt_percent": "11%", "d_value": -4},
                    {"best_frames": 6, "emt_percent": "11%", "d_value": -2},
                    {"best_frames": 8, "emt_percent": "11%", "d_value": 0},
                    {"best_frames": 6, "emt_percent": "12-14%", "d_value": -4},
                    {"best_frames": 8, "emt_percent": "12-14%", "d_value": -2},
                    {"best_frames": 10, "emt_percent": "12-14%", "d_value": 0},
                    {"best_frames": 10, "emt_percent": "15-17%", "d_value": -4},
                    {"best_frames": 12, "emt_percent": "15-17%", "d_value": -2},
                    {"best_frames": 14, "emt_percent": "15-17%", "d_value": 0},
                    {"best_frames": 14, "emt_percent": "18-20%", "d_value": -4},
                    {"best_frames": 16, "emt_percent": "18-20%", "d_value": -2},
                    {"best_frames": 18, "emt_percent": "18-20%", "d_value": 0},
                    {"best_frames": 16, "emt_percent": "21%", "d_value": -4},
                    {"best_frames": 18, "emt_percent": "21%", "d_value": -2},
                    {"best_frames": 20, "emt_percent": "21%", "d_value": 0},
                    {"best_frames": 18, "emt_percent": "22-24%", "d_value": -4},
                    {"best_frames": 20, "emt_percent": "22-24%", "d_value": -2},
                    {"best_frames": 22, "emt_percent": "22-24%", "d_value": 0},
                    {"best_frames": 20, "emt_percent": "25-26%", "d_value": -4},
                    {"best_frames": 22, "emt_percent": "25-26%", "d_value": -2},
                    {"best_frames": 24, "emt_percent": "25-26%", "d_value": 0}
                ],
                "è´æ–¯è’‚ç¬¬äºŒå‘ vs EMTç¬¬äºŒå‘": [
                    {"best_frames": 12, "emt_percent": "0%", "d_value": -4},
                    {"best_frames": 14, "emt_percent": "0%", "d_value": -2},
                    {"best_frames": 16, "emt_percent": "0%", "d_value": 0},
                    {"best_frames": 16, "emt_percent": "2-4%", "d_value": -4},
                    {"best_frames": 18, "emt_percent": "2-4%", "d_value": -2},
                    {"best_frames": 20, "emt_percent": "2-4%", "d_value": 0},
                    {"best_frames": 20, "emt_percent": "5-7%", "d_value": -4},
                    {"best_frames": 22, "emt_percent": "5-7%", "d_value": -2},
                    {"best_frames": 24, "emt_percent": "5-7%", "d_value": 0},
                    {"best_frames": 24, "emt_percent": "8-10%", "d_value": -4},
                    {"best_frames": 26, "emt_percent": "8-10%", "d_value": -2},
                    {"best_frames": 28, "emt_percent": "8-10%", "d_value": 0},
                    {"best_frames": 26, "emt_percent": "11%", "d_value": -4},
                    {"best_frames": 28, "emt_percent": "11%", "d_value": -2},
                    {"best_frames": 30, "emt_percent": "11%", "d_value": 0},
                    {"best_frames": 28, "emt_percent": "12-14%", "d_value": -4},
                    {"best_frames": 30, "emt_percent": "12-14%", "d_value": -2}
                ],
                "è´æ–¯è’‚ç¬¬ä¸‰å‘ vs EMTç¬¬ä¸‰å‘": [
                    {"best_frames": 0, "emt_percent": "15-17%", "d_value": 0},
                    {"best_frames": 2, "emt_percent": "15-17%", "d_value": 2},
                    {"best_frames": 2, "emt_percent": "18-20%", "d_value": -4},
                    {"best_frames": 4, "emt_percent": "18-20%", "d_value": -2},
                    {"best_frames": 6, "emt_percent": "18-20%", "d_value": 0},
                    {"best_frames": 8, "emt_percent": "18-20%", "d_value": 2},
                    {"best_frames": 4, "emt_percent": "21%", "d_value": -4},
                    {"best_frames": 6, "emt_percent": "21%", "d_value": -2},
                    {"best_frames": 8, "emt_percent": "21%", "d_value": 0},
                    {"best_frames": 10, "emt_percent": "21%", "d_value": 2},
                    {"best_frames": 8, "emt_percent": "22-24%", "d_value": -4},
                    {"best_frames": 10, "emt_percent": "22-24%", "d_value": -2},
                    {"best_frames": 12, "emt_percent": "22-24%", "d_value": 0},
                    {"best_frames": 14, "emt_percent": "22-24%", "d_value": 2},
                    {"best_frames": 10, "emt_percent": "25-26%", "d_value": -4},
                    {"best_frames": 12, "emt_percent": "25-26%", "d_value": -2},
                    {"best_frames": 14, "emt_percent": "25-26%", "d_value": 0},
                    {"best_frames": 16, "emt_percent": "25-26%", "d_value": 2}
                ],
                "è´æ–¯è’‚ç¬¬å››å‘ vs EMTç¬¬ä¸‰å‘": [
                    {"best_frames": 0, "emt_percent": "2-4%", "d_value": 2},
                    {"best_frames": 0, "emt_percent": "5-7%", "d_value": -4},
                    {"best_frames": 2, "emt_percent": "5-7%", "d_value": -2},
                    {"best_frames": 4, "emt_percent": "5-7%", "d_value": 0},
                    {"best_frames": 6, "emt_percent": "5-7%", "d_value": 2},
                    {"best_frames": 6, "emt_percent": "8-10%", "d_value": -4},
                    {"best_frames": 8, "emt_percent": "8-10%", "d_value": -2},
                    {"best_frames": 10, "emt_percent": "8-10%", "d_value": 0},
                    {"best_frames": 12, "emt_percent": "8-10%", "d_value": 2},
                    {"best_frames": 8, "emt_percent": "11%", "d_value": -4},
                    {"best_frames": 10, "emt_percent": "11%", "d_value": -2},
                    {"best_frames": 12, "emt_percent": "11%", "d_value": 0},
                    {"best_frames": 14, "emt_percent": "11%", "d_value": 2},
                    {"best_frames": 12, "emt_percent": "12-14%", "d_value": -4},
                    {"best_frames": 14, "emt_percent": "12-14%", "d_value": -2},
                    {"best_frames": 16, "emt_percent": "12-14%", "d_value": 0},
                    {"best_frames": 18, "emt_percent": "12-14%", "d_value": 2},
                    {"best_frames": 18, "emt_percent": "15-17%", "d_value": -4},
                    {"best_frames": 20, "emt_percent": "15-17%", "d_value": -2},
                    {"best_frames": 22, "emt_percent": "15-17%", "d_value": 0},
                    {"best_frames": 24, "emt_percent": "15-17%", "d_value": 2},
                    {"best_frames": 24, "emt_percent": "18-20%", "d_value": -4},
                    {"best_frames": 26, "emt_percent": "18-20%", "d_value": -2},
                    {"best_frames": 28, "emt_percent": "18-20%", "d_value": 0},
                    {"best_frames": 30, "emt_percent": "18-20%", "d_value": 2},
                    {"best_frames": 26, "emt_percent": "21%", "d_value": -4},
                    {"best_frames": 28, "emt_percent": "21%", "d_value": -2},
                    {"best_frames": 30, "emt_percent": "21%", "d_value": 0},
                    {"best_frames": 30, "emt_percent": "22-24%", "d_value": -4}
                ]
            },
            "best_lpls": {
                "è´æ–¯è’‚ç¬¬ä¸€å‘ vs LPLSç¬¬äºŒå‘": [
                    {"best_frames": 0, "lpls_percent": "5-7%", "d_value": 6},
                    {"best_frames": 2, "lpls_percent": "5-7%", "d_value": 8},
                    {"best_frames": 4, "lpls_percent": "8-10%", "d_value": 6},
                    {"best_frames": 6, "lpls_percent": "8-10%", "d_value": 8},
                    {"best_frames": 8, "lpls_percent": "11-14%", "d_value": 6},
                    {"best_frames": 10, "lpls_percent": "11-14%", "d_value": 8},
                    {"best_frames": 12, "lpls_percent": "15-17%", "d_value": 6},
                    {"best_frames": 14, "lpls_percent": "15-17%", "d_value": 8},
                    {"best_frames": 16, "lpls_percent": "18-20%", "d_value": 6},
                    {"best_frames": 18, "lpls_percent": "18-20%", "d_value": 8},
                    {"best_frames": 20, "lpls_percent": "21-24%", "d_value": 6},
                    {"best_frames": 22, "lpls_percent": "21-24%", "d_value": 8},
                    {"best_frames": 24, "lpls_percent": "25-26%", "d_value": 6},
                    {"best_frames": 26, "lpls_percent": "25-26%", "d_value": 8}
                ],
                "è´æ–¯è’‚ç¬¬äºŒå‘ vs LPLSç¬¬äºŒå‘": [
                    {"best_frames": 14, "lpls_percent": "0-1%", "d_value": 6},
                    {"best_frames": 16, "lpls_percent": "0-1%", "d_value": 8},
                    {"best_frames": 18, "lpls_percent": "2-4%", "d_value": 6},
                    {"best_frames": 20, "lpls_percent": "2-4%", "d_value": 8},
                    {"best_frames": 22, "lpls_percent": "5-7%", "d_value": 6},
                    {"best_frames": 24, "lpls_percent": "5-7%", "d_value": 8},
                    {"best_frames": 26, "lpls_percent": "8-10%", "d_value": 6},
                    {"best_frames": 28, "lpls_percent": "8-10%", "d_value": 8},
                    {"best_frames": 30, "lpls_percent": "11-14%", "d_value": 6}
                ],
                "è´æ–¯è’‚ç¬¬ä¸‰å‘ vs LPLSç¬¬ä¸‰å‘": [
                    {"best_frames": 2, "lpls_percent": "21-24%", "d_value": 6},
                    {"best_frames": 4, "lpls_percent": "21-24%", "d_value": 8},
                    {"best_frames": 8, "lpls_percent": "25-26%", "d_value": 6},
                    {"best_frames": 10, "lpls_percent": "25-26%", "d_value": 8}
                ],
                "è´æ–¯è’‚ç¬¬å››å‘ vs LPLSç¬¬ä¸‰å‘": [
                    {"best_frames": 0, "lpls_percent": "8-10%", "d_value": 6},
                    {"best_frames": 2, "lpls_percent": "8-10%", "d_value": 8},
                    {"best_frames": 6, "lpls_percent": "11-14%", "d_value": 6},
                    {"best_frames": 8, "lpls_percent": "11-14%", "d_value": 8},
                    {"best_frames": 12, "lpls_percent": "15-17%", "d_value": 6},
                    {"best_frames": 14, "lpls_percent": "15-17%", "d_value": 8},
                    {"best_frames": 18, "lpls_percent": "18-20%", "d_value": 6},
                    {"best_frames": 20, "lpls_percent": "18-20%", "d_value": 8},
                    {"best_frames": 24, "lpls_percent": "21-24%", "d_value": 6},
                    {"best_frames": 26, "lpls_percent": "21-24%", "d_value": 8},
                    {"best_frames": 30, "lpls_percent": "25-26%", "d_value": 6}
                ]
            }
        };

        // è§’è‰²è“„é€Ÿé€‰é¡¹
        const charOptions = {
            "best_emt": ["0%", "2-4%", "5-7%", "8-10%", "11%", "12-14%", "15-17%", "18-20%", "21%", "22-24%", "25-26%"],
            "best_lpls": ["0-1%", "2-4%", "5-7%", "8-10%", "11-14%", "15-17%", "18-20%", "21-24%", "25-26%"]
        };

        // å¼¹é“æ•°æ®
        const trajectoryData = {
            "best": {
                "P1": 14,
                "P2": 14,
                "P3": 12,
                "P4": 12,
                "P5": 12
            },
            "emt": {
                "P1": 16,
                "P2": 16,
                "P3": 14,
                "P4": 14,
                "P5": 14
            },
            "lpls": {
                "P1": 6,
                "P2": 6,
                "P3": 6,
                "P4": 6,
                "P5": 6
            }
        };

        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            // è·å–DOMå…ƒç´ 
            const charTypeSelect = document.getElementById('char-type');
            const otherPercentSelect = document.getElementById('other-percent');
            const bestFramesInput = document.getElementById('best-frames');
            const checkBtn = document.getElementById('check-btn');
            const resultContent = document.getElementById('result-content');
            
            // åˆå§‹åŒ–é€‰é¡¹
            updateCharOptions();
            
            // ç›‘å¬è§’è‰²ç±»å‹å˜åŒ–
            charTypeSelect.addEventListener('change', function() {
                updateCharOptions();
            });
            
            // æŸ¥è¯¢æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            checkBtn.addEventListener('click', function() {
                checkAllPossibleCombinations();
            });
            
            // æ›´æ–°è§’è‰²é€‰é¡¹
            function updateCharOptions() {
                const charType = charTypeSelect.value;
                const options = charOptions[charType];
                
                // æ¸…ç©ºç°æœ‰é€‰é¡¹
                otherPercentSelect.innerHTML = '';
                
                // æ·»åŠ æ–°é€‰é¡¹
                options.forEach(option => {
                    const optionElement = document.createElement('option');
                    optionElement.value = option;
                    optionElement.textContent = option;
                    otherPercentSelect.appendChild(optionElement);
                });
            }
            
            // æ£€æŸ¥æ‰€æœ‰å¯èƒ½çš„ç»„åˆ
            function checkAllPossibleCombinations() {
                // è·å–è¾“å…¥å€¼
                const charType = charTypeSelect.value;
                const bestFrames = parseInt(bestFramesInput.value);
                const otherPercent = otherPercentSelect.value;
                
                // éªŒè¯è¾“å…¥
                if (isNaN(bestFrames) || bestFrames < 0 || bestFrames > 30) {
                    showError("è¯·è¾“å…¥0-30ä¹‹é—´çš„è´æ–¯è’‚å‡å°‘å¸§æ•°");
                    return;
                }
                
                // è·å–å¯¹åº”çš„æ•°æ®
                const pairingData = hitData[charType];
                const otherChar = charType.split('_')[1]; // è·å–emtæˆ–lpls
                
                // å­˜å‚¨æ‰€æœ‰å¯è¡Œçš„ç»„åˆ
                const validCombinations = [];
                
                // éå†æ‰€æœ‰å‡»å‘é…å¯¹
                Object.keys(pairingData).forEach(pairing => {
                    // æŸ¥æ‰¾åŒ¹é…çš„æ•°æ®
                    const match = pairingData[pairing].find(item => {
                        if (charType === 'best_emt') {
                            return item.best_frames === bestFrames && item.emt_percent === otherPercent;
                        } else if (charType === 'best_lpls') {
                            return item.best_frames === bestFrames && item.lpls_percent === otherPercent;
                        }
                        return false;
                    });
                    
                    // å¦‚æœæ‰¾åˆ°åŒ¹é…çš„æ•°æ®
                    if (match) {
                        // æŸ¥æ‰¾å¯è¡Œçš„ç«™ä½ç»„åˆ
                        const positions = findValidPositions(match.d_value, otherChar);
                        
                        if (positions.length > 0) {
                            validCombinations.push({
                                pairing: pairing,
                                d_value: match.d_value,
                                positions: positions
                            });
                        }
                    }
                });
                
                // æ˜¾ç¤ºç»“æœ
                if (validCombinations.length > 0) {
                    showSuccess(validCombinations, charType);
                } else {
                    showNoResult();
                }
            }
            
            // æŸ¥æ‰¾å¯è¡Œçš„ç«™ä½ç»„åˆ
            function findValidPositions(dValue, otherChar) {
                const validPositions = [];
                
                // éå†æ‰€æœ‰å¯èƒ½çš„ç«™ä½ç»„åˆ
                for (const bestPos of ['P1', 'P2', 'P3', 'P4', 'P5']) {
                    for (const otherPos of ['P1', 'P2', 'P3', 'P4', 'P5']) {
                        // è®¡ç®—å¼¹é“æ—¶é—´å·®
                        const trajectoryDiff = calculateTrajectoryDiff(bestPos, otherPos, otherChar);
                        
                        // å¦‚æœå¼¹é“æ—¶é—´å·®ç­‰äºdå€¼ï¼Œåˆ™è¿™æ˜¯ä¸€ä¸ªå¯è¡Œçš„ç«™ä½ç»„åˆ
                        if (trajectoryDiff === dValue) {
                            validPositions.push({
                                best_position: bestPos,
                                other_position: otherPos
                            });
                        }
                    }
                }
                
                return validPositions;
            }
            
            // è®¡ç®—å¼¹é“æ—¶é—´å·®
            function calculateTrajectoryDiff(bestPosition, otherPosition, otherChar) {
                const bestTrajectory = trajectoryData.best[bestPosition];
                const otherTrajectory = trajectoryData[otherChar][otherPosition];
                return bestTrajectory - otherTrajectory;
            }
            
            // æ˜¾ç¤ºæˆåŠŸç»“æœ
            function showSuccess(validCombinations, charType) {
                let resultHTML = `<div class="success">`;
                resultHTML += `<h3>ğŸ‰ å¯ä»¥è§¦å‘åŒå¸§å‘½ä¸­ï¼</h3>`;
                resultHTML += `<p>æ‰¾åˆ° ${validCombinations.length} ç§å¯è¡Œçš„ç»„åˆï¼š</p>`;
                
                resultHTML += `<div class="possible-combinations">`;
                validCombinations.forEach(combination => {
                    resultHTML += `<div class="combination-item">`;
                    resultHTML += `<h4>${combination.pairing}</h4>`;
                    resultHTML += `<p><strong>å‡»å‘æ—¶é—´å·®:</strong> ${combination.d_value}å¸§</p>`;
                    resultHTML += `<p><strong>ç«™ä½è¦æ±‚:</strong> ${formatPositions(combination.positions)}</p>`;
                    resultHTML += `</div>`;
                });
                resultHTML += `</div>`;
                resultHTML += `</div>`;
                
                resultContent.innerHTML = resultHTML;
                resultContent.className = 'success';
            }
            
            // æ˜¾ç¤ºæ— ç»“æœ
            function showNoResult() {
                resultContent.innerHTML = `
                    <div class="error">
                        <h3>ğŸ˜” æ— æ³•è§¦å‘åŒå¸§å‘½ä¸­</h3>
                        <p>å½“å‰é€‰æ‹©çš„è“„é€Ÿç»„åˆæ— æ³•è§¦å‘åŒå¸§å‘½ä¸­ï¼Œè¯·å°è¯•å…¶ä»–ç»„åˆã€‚</p>
                        <p>æç¤ºï¼šå¯ä»¥å°è¯•è°ƒæ•´è´æ–¯è’‚çš„å‡å°‘å¸§æ•°æˆ–å‰¯è§’è‰²çš„è“„é€Ÿç™¾åˆ†æ¯”ã€‚</p>
                    </div>
                `;
                resultContent.className = 'error';
            }
            
            // æ˜¾ç¤ºé”™è¯¯
            function showError(message) {
                resultContent.innerHTML = `
                    <div class="error">
                        <h3>âŒ è¾“å…¥é”™è¯¯</h3>
                        <p>${message}</p>
                    </div>
                `;
                resultContent.className = 'error';
            }
            
            // æ ¼å¼åŒ–ç«™ä½æ˜¾ç¤º
            function formatPositions(positions) {
                if (positions.length === 0) return 'æ— å¯è¡Œç«™ä½';
                
                // åªæ˜¾ç¤ºå‰5ä¸ªç«™ä½ç»„åˆï¼Œé¿å…æ˜¾ç¤ºè¿‡å¤š
                const displayPositions = positions.slice(0, 5);
                let result = '';
                
                displayPositions.forEach((pos, index) => {
                    if (index > 0) result += 'ï¼Œ';
                    result += `è´æ–¯è’‚${pos.best_position} + ${pos.other_position}`;
                });
                
                if (positions.length > 5) {
                    result += ` ç­‰ ${positions.length} ç§ç«™ä½ç»„åˆ`;
                }
                
                return result;
            }
        });
    </script>
</body>
</html>